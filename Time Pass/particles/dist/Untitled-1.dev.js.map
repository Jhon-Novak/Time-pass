{"version":3,"sources":["Untitled-1.js"],"names":["NUM_PARTICLES","ROWS","COLS","THICKNESS","Math","pow","SPACING","MARGIN","COLOR","DRAG","EASE","container","particle","canvas","mouse","stats","list","ctx","tog","man","dx","dy","mx","my","d","t","f","a","b","i","n","w","h","p","s","r","c","vx","vy","x","y","init","document","getElementById","createElement","getContext","width","height","style","marginLeft","round","marginTop","Object","create","ox","oy","floor","addEventListener","e","bounds","getBoundingClientRect","clientX","left","clientY","top","Stats","body","appendChild","domElement","step","begin","Date","cos","sin","tan","atan2","createImageData","data","putImageData","end","requestAnimationFrame"],"mappings":"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","sourcesContent":["var NUM_PARTICLES = ((ROWS = 100) * (COLS = 300)),\r\n    THICKNESS = Math.pow(80, 2),\r\n    SPACING = 3,\r\n    MARGIN = 100,\r\n    COLOR = 220,\r\n    DRAG = 0.95,\r\n    EASE = 0.25,\r\n\r\n    /*\r\n\r\n    used for sine approximation, but Math.sin in Chrome is still fast enough :)http://jsperf.com/math-sin-vs-sine-approximation\r\n\r\n    B = 4 / Math.PI,\r\n    C = -4 / Math.pow( Math.PI, 2 ),\r\n    P = 0.225,\r\n\r\n    */\r\n\r\n    container,\r\n    particle,\r\n    canvas,\r\n    mouse,\r\n    stats,\r\n    list,\r\n    ctx,\r\n    tog,\r\n    man,\r\n    dx, dy,\r\n    mx, my,\r\n    d, t, f,\r\n    a, b,\r\n    i, n,\r\n    w, h,\r\n    p, s,\r\n    r, c;\r\n\r\nparticle = {\r\n    vx: 0,\r\n    vy: 0,\r\n    x: 0,\r\n    y: 0\r\n};\r\n\r\nfunction init() {\r\n\r\n    container = document.getElementById('container');\r\n    canvas = document.createElement('canvas');\r\n\r\n    ctx = canvas.getContext('2d');\r\n    man = false;\r\n    tog = true;\r\n\r\n    list = [];\r\n\r\n    w = canvas.width = COLS * SPACING + MARGIN * 2;\r\n    h = canvas.height = ROWS * SPACING + MARGIN * 2;\r\n\r\n    container.style.marginLeft = Math.round(w * -0.5) + 'px';\r\n    container.style.marginTop = Math.round(h * -0.5) + 'px';\r\n\r\n    for (i = 0; i < NUM_PARTICLES; i++) {\r\n\r\n        p = Object.create(particle);\r\n        p.x = p.ox = MARGIN + SPACING * (i % COLS);\r\n        p.y = p.oy = MARGIN + SPACING * Math.floor(i / COLS);\r\n\r\n        list[i] = p;\r\n    }\r\n\r\n    container.addEventListener('mousemove', function(e) {\r\n\r\n        bounds = container.getBoundingClientRect();\r\n        mx = e.clientX - bounds.left;\r\n        my = e.clientY - bounds.top;\r\n        man = true;\r\n\r\n    });\r\n\r\n    if (typeof Stats === 'function') {\r\n        document.body.appendChild((stats = new Stats()).domElement);\r\n    }\r\n\r\n    container.appendChild(canvas);\r\n}\r\n\r\nfunction step() {\r\n\r\n    if (stats) stats.begin();\r\n\r\n    if (tog = !tog) {\r\n\r\n        if (!man) {\r\n\r\n            t = +new Date() * 0.001;\r\n            mx = w * 0.5 + (Math.cos(t * 2.1) * Math.cos(t * 0.9) * w * 0.45);\r\n            my = h * 0.5 + (Math.sin(t * 3.2) * Math.tan(Math.sin(t * 0.8)) * h * 0.45);\r\n        }\r\n\r\n        for (i = 0; i < NUM_PARTICLES; i++) {\r\n\r\n            p = list[i];\r\n\r\n            d = (dx = mx - p.x) * dx + (dy = my - p.y) * dy;\r\n            f = -THICKNESS / d;\r\n\r\n            if (d < THICKNESS) {\r\n                t = Math.atan2(dy, dx);\r\n                p.vx += f * Math.cos(t);\r\n                p.vy += f * Math.sin(t);\r\n            }\r\n\r\n            p.x += (p.vx *= DRAG) + (p.ox - p.x) * EASE;\r\n            p.y += (p.vy *= DRAG) + (p.oy - p.y) * EASE;\r\n\r\n        }\r\n\r\n    } else {\r\n\r\n        b = (a = ctx.createImageData(w, h)).data;\r\n\r\n        for (i = 0; i < NUM_PARTICLES; i++) {\r\n\r\n            p = list[i];\r\n            b[n = (~~p.x + (~~p.y * w)) * 4] = b[n + 1] = b[n + 2] = COLOR, b[n + 3] = 255;\r\n        }\r\n\r\n        ctx.putImageData(a, 0, 0);\r\n    }\r\n\r\n    if (stats) stats.end();\r\n\r\n    requestAnimationFrame(step);\r\n}\r\n\r\ninit();\r\nstep();"],"file":"Untitled-1.dev.js"}